## 대제목

오늘은 api를 가져오는 방법에 대해 학습했다.


#### api 가져오기

파이썬에서 api를 가져오기 위해서 `requests`라는 라이브러리를 사용했다. 해당 라이브러리는 혼자 이것저것 만들어 보면서 접했던 지라 낯설지 않았다. 수업에 사용한 api는 영화진흥위원회에서 제공하는 것이었다. key를 받기 위해서 회원가입을 해야한다. 회원가입을 하려고 하는데 음?? 이미 가입되어있다. 네이버 영화 검색 api가 서비스 종료되면서 다른 영화 api를 찾았는데 이것 저것 다 가입한 모양이다. 
그리고 key를 넣고 요청을 보내면 정상적으로 요청이 오는 것을 확인 할 수 있다.

##### call.py
```python 
def gen_url(dt="20120101"):
    base_url="http://www.kobis.or.kr/kobisopenapi/webservice/rest/boxoffice/searchDailyBoxOfficeList.json"
    key="key123456789"
    url=f"{base_url}?key={key}&targetDt={dt}"

    return url


def req(dt="20120101"):
    url=gen_url(dt)
    resp=reqs.get(url)

    code=resp.status_code
    data=resp.json()

    return code, data
```

##### test_call.py
```python
def test_req():
    code, data = req()
    assert code==200     
```
```bash
$ pytest

============================================================ test session starts ============================================================
platform linux -- Python 3.11.9, pytest-8.3.2, pluggy-1.5.0
rootdir: /home/root2/code/movie
configfile: pyproject.toml
plugins: anyio-4.4.0, time-machine-2.14.2, cov-5.0.0
collected 1 items

tests/test_call.py .....                                                                                                              [100%]

============================================================= 1 passed in 1.72s =============================================================
```

### 정리
